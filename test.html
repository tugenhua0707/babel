<!DOCTYPE html>
<html>
  <head>
    <title>分词</title>
  </head>
  <body>
    <script>
      var i = -1;
      var curToken;   // 用于记录当前符号
      var tokens = [
        {type: "whitespace", value: "\n"},
        {type: "identifier", value: "if"},
        {type: "whitespace", value: " "},
        {type: "parens", value: "("},
        {type: "number", value: "1"},
        {type: "whitespace", value: " "},
        {type: "operator", value: ">"},
        {type: "whitespace", value: " "},
        {type: "number", value: "0"},
        {type: "parens", value: ")"},
        {type: "whitespace", value: " "},
        {type: "brace", value: "{"},
        {type: "whitespace", value: "\n"},
        {type: "identifier", value: "alert"},
        {type: "parens", value: "("},
        {type: "string", value: "'aa'"},
        {type: "parens", value: ")"},
        {type: "sep", value: ";"},
        {type: "whitespace", value: "\n"},
        {type: "brace", value: "}"},
        {type: "whitespace", value: "\n"}
      ];
      function parse() {
        const ast = {
          type: 'Program',
          body: [],
        };
        // 逐条解析顶层语句
        while (i < tokens.length) {
          const statement = nextToken();
          console.log(statement);
          if (!statement) {
            break;
          }
          ast.body.push(statement);
        }
        return ast;
      }
      function nextToken () {
        do {
          i++;
          console.log(i);
          curToken = tokens[i] || { type: 'EOF' };
          console.log(curToken);
          
        } while (curToken.type === 'whitespace');
      }
      parse();
    </script>
  </body>
</html>